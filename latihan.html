<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="author" content="Faiz Hamdan">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <!--leafleat Javascript Library-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />

    <!-- Search CSS Library -->
    <link rel="stylesheet" href="assets/plugins/leaflet-search/leaflet-search.css" />

    <!-- Geolocation CSS Library for Plugin -->
    <link rel="stylesheet"
        href="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.43.0/L.Control.Locate.css" />

    <!-- Leaflet Mouse Position CSS Library -->
    <link rel="stylesheet" href="assets/plugins/leaflet-mouseposition/L.Control.MousePosition.css" />

    <!-- Leaflet Measure CSS Library -->
    <link rel="stylesheet" href="assets/plugins/leaflet-measure/leaflet-measure.css" />

    <!-- EasyPrint CSS Library -->
    <link rel="stylesheet" href="assets/plugins/leaflet-easyprint/easyPrint.css" />

    <!-- Marker Cluster -->
    <link rel="stylesheet" href="assets/plugins/leaflet-markercluster/MarkerCluster.css" />
    <link rel="stylesheet" href="assets/plugins/leaflet-markercluster/MarkerCluster.Default.css" />

    <!-- Routing -->
    <link rel="stylesheet" href="assets/plugins/leaflet-routing/leaflet-routing-machine.css" />


    <!-- Fontawesome CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css">

    <title>Peta Web</title>

    <style>
        html,
        body,
        #map {
            width: 100%;
            height: 100%;
            padding-top: 28px;
        }
    </style>
      <style>
        #map {
            height: 100vh;
        }

        /* Background pada Judul */
        *.info {
            padding: 6px 8px;
            font: 14px/16px Arial, Helvetica, sans-serif;
            background: white;
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
            border-radius: 5px;
            text-align: center;
        }

        .info h2 {
            margin: 0 0 5px;
            color: #777;
        }
    </style>
</head>

<body>
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>

    <!-- Topbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <a class="navbar-brand" href="#"><b><i class="fas fa-map-marker-alt"></i>&nbsp;&nbsp;Peta Wisata Kabupaten Sleman</b></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ml-auto">
            <li class="nav-item">
                <a class="nav-link" href="index.html" data-toggle="Search.html" data-target="Search.html"><i class="fas fa-layer-group"></i> Home</a>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="basemapDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Basemap</a>
                <div class="dropdown-menu" aria-labelledby="basemapDropdown">
                    <a class="dropdown-item" href="#" onclick="changeBasemap(basemap1)">OpenStreetMap</a>
                    <a class="dropdown-item" href="#" onclick="changeBasemap(basemap2)">Esri World Street</a>
                    <a class="dropdown-item" href="#" onclick="changeBasemap(basemap3)">Esri Imagery</a>
                    <a class="dropdown-item" href="#" onclick="changeBasemap(basemap4)">Stadia Dark Mode</a>
                </div>
            </li>
        </ul>
    </div>
</nav>
    <!-- JavaScript -->
<script>
    function changeBasemap(basemapLayer) {
        // Hapus semua layer basemap yang ada
        map.eachLayer(function (layer) {
            if (layer instanceof L.TileLayer) {
                map.removeLayer(layer);
            }
        });

        // Tambahkan basemap yang dipilih
        basemapLayer.addTo(map);
    }
</script>

  
        <div id="map"></div>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/2.1.0/chroma.min.js"></script>

        <!-- Search JavaScript Library -->
        <script src="assets/plugins/leaflet-search/leaflet-search.js"></script>

        <!-- Geolocation Javascript Library -->
        <script
            src="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.43.0/L.Control.Locate.min.js"></script>

        <!-- Leaflet Mouse Position JavaScript Library -->
        <script src="assets/plugins/leaflet-mouseposition/L.Control.MousePosition.js"></script>

        <!-- Leaflet Measure JavaScript Library -->
        <script src="assets/plugins/leaflet-measure/leaflet-measure.js"></script>

        <!-- EasyPrint JavaScript Library -->
        <script src="assets/plugins/leaflet-easyprint/leaflet.easyPrint.js"></script>

        <!-- Marker Cluster -->
        <script src="assets/plugins/leaflet-markercluster/leaflet.markercluster.js"></script>
        <script src="assets/plugins/leaflet-markercluster/leaflet.markercluster-src.js"></script>

        <!-- Routing -->
        <script src="assets/plugins/leaflet-routing/leaflet-routing-machine.js"></script>
        <script src="assets/plugins/leaflet-routing/leaflet-routing-machine.min.js"></script>

        <script>
            /* Initial Map */
            var map = L.map('map')
            /*Plugin Routing*/
            L.Routing.control({
                waypoints: [
                    L.latLng(-7.7969, 110.3715),
                    L.latLng(-7.7969, 110.3715)
                ],
                routeWhileDragging: true
            }).addTo(map);



            /* Tile Basemap */
            var basemap1 = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '<a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> | <a href="DIVSIG UGM" target="_blank">DIVSIG UGM</a>' //menambahkan nama//
            });
            var basemap2 = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{ z } / { y } / { x }',
                {
                    attribution: 'Tiles &copy; Esri | <a href="Latihan WebGIS" target="_blank">DIVSIG UGM</a>'
                });
            var basemap3 = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{ z } / { y } / { x }',
                {
                    attribution: 'Tiles &copy; Esri | <a href="Lathan WebGIS" target="_blank">DIVSIG UGM</a>'
                });
            var basemap4 = L.tileLayer('https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png', {
                attribution: '&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptile s.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'
            });
            basemap1.addTo(map);

            // /* Layer Marker */
            // var marker1 = L.marker([-7.766715, 110.377460], { draggable: true });
            // marker1.addTo(map);
            // marker1.bindPopup("Gedung B DIVSIG UGM");

            // var marker2 = L.marker([-7.743168, 110.350276]);
            // marker2.addTo(map);
            // marker2.bindPopup("RS.Akademik UGM");

            // /* Control Layer */
            // var baseMaps = {
            //     "OpenStreetMap": basemap1,
            //     "Esri World Street": basemap2,
            //     "Esri Imagery": basemap3,
            //     "Stadia Dark Mode": basemap4
            // };

            // var overlayMaps = {
            //     "Gedung B DIVSIG UGM": marker1,
            //     "RS.Akademik UGM": marker2,
            // };

            // L.control.layers(baseMaps, overlayMaps, { collapsed: false }).addTo(map);

            /* Scale Bar */
            L.control.scale({
                maxWidth: 150, position: 'bottomright'
            }).addTo(map);
            var wfsgeoserver1 = L.geoJson(null, {
                pointToLayer: function (feature, latlng) {
                    return L.marker(latlng, {
                        // icon: L.icon({
                        //   iconUrl: "assets/img/marker/fas_rumahsakit_rujukan.png",
                        //   iconSize: [32, 32],
                        //   iconAnchor: [16, 32],
                        //   popupAnchor: [0, -32],
                        //   tooltipAnchor: [16, -20]
                        // })
                    });
                },
                onEachFeature: function (feature, layer) {
                    /* Variabel content untuk memanggil atribut dari data file geojson */
                    var content = "Kapanewon : " + feature.properties.kecamatan + "<br>" +
                        "Kabupaten : " + "Sleman" + "<br>" +
                        "Provinsi : " + "Daerah Istimewa Yogyakarta";
                    layer.on({
                        click: function (e) { //Fungsi ketika icon simbol di-klik
                            wfsgeoserver1.bindPopup(content);
                        },
                        mouseover: function (e) {
                            wfsgeoserver1.bindTooltip(feature.properties.kecamatan);
                        },
                        mouseout: function (e) {
                            wfsgeoserver1.closePopup();
                        }
                    });
                }
            });


            $.getJSON("wfsgeojson1.php", function (data) {
                wfsgeoserver1.addData(data);
                wfsgeoserver1.addTo(map);
                map.fitBounds(wfsgeoserver1.getBounds());
            });

            /* Image Legend */
            L.Control.Legend = L.Control.extend({
                onAdd: function (map) {
                    var img = L.DomUtil.create('img');
                    img.src = "images/legenda.jpg";
                    img.style.width = '350px';
                    return img;
                }
            });

            L.control.Legend = function (opts) {
                return new L.Control.Legend(opts);
            }

            L.control.Legend({ position: 'bottomleft' }).addTo(map);

            /*Plugin Search */
            var searchControl = new L.Control.Search({
                position: "topleft",
                layer: wfsgeoserver1, //Nama variabel layer
                propertyName: "kecamatan", //Field untuk pencarian
                marker: false,
                moveToLocation: function (latlng, title, map) {
                    var zoom = map.getBoundsZoom(latlng.layer.getBounds());
                    map.setView(latlng, zoom);
                },
            });
            searchControl
                .on("search:locationfound", function (e) {
                    e.layer.setStyle({
                        fillColor: "#ffff00",
                        color: "#0000ff",
                    });
                })
                .on("search:collapse", function (e) {
                    featuresLayer.eachLayer(function (layer) {
                        featuresLayer.resetStyle(layer);
                    });
                });
            map.addControl(searchControl);

            /*Plugin Geolocation */
            var locateControl = L.control
                .locate({
                    position: "topleft",
                    drawCircle: true,
                    follow: true,
                    setView: true,
                    keepCurrentZoomLevel: false,
                    markerStyle: {
                        weight: 1,
                        opacity: 0.8,
                        fillOpacity: 0.8,
                    },
                    circleStyle: {
                        weight: 1,
                        clickable: false,
                    },
                    icon: "fas fa-crosshairs",
                    metric: true,
                    strings: {
                        title: "Click for Your Location",
                        popup: "You're here. Accuracy {distance} {unit}",
                        outsideMapBoundsMsg: "Not available",
                    },
                    locateOptions: {
                        maxZoom: 16,
                        watch: true,
                        enableHighAccuracy: true,
                        maximumAge: 10000,
                        timeout: 10000,
                    },
                })
                .addTo(map);

            /*Plugin Mouse Position Coordinate */
            L.control.mousePosition({ position: "bottomright", separator: ",", prefix: "Point Coodinate: " }).addTo(map);



            /*Plugin Measurement Tool */
            var measureControl = new L.Control.Measure({
                position: "topleft",
                primaryLengthUnit: "meters",
                secondaryLengthUnit: "kilometers",
                primaryAreaUnit: "hectares",
                secondaryAreaUnit: "sqmeters",
                activeColor: "#FF0000",
                completedColor: "#00FF00",
            });
            measureControl.addTo(map);

            /*Plugin EasyPrint */
            L.easyPrint({
                title: "Print",
            }).addTo(map); 
            /*Layer Marker*/
            var addressPoints = [
                [-7.77054, 110.48941, "Candi Ratu Boko", "boko.jpg"],
                [-7.78359, 110.51193, "Candi Ijo", "ijo.jpg"],
                [-7.70283, 110.44911, "Blue Lagoon", "bluelagoon.jpg "],
                [-7.76729, 110.35424, "Sindu Kusuma Edupark", "ske.jpeg"],
                [-7.73763, 110.38525, "Green Kayen", "bluelagoon.jpg"],
                [-7.64006, 110.42635, "Agro Tourism Bhumi Merapi", "museummerapi.jpg"],
                [-7.6209,  110.42162, "Merapi Park", "museummerapi.jpg"],
                [-7.60233, 110.45525, "Lava Merapi ", "watupurbo.jpg"],
                [-7.57689, 110.45482, "Bukit Kelangon", "klangon.jpg"],
                [-7.60053, 110.44907, "Musium Mini Sisa Hartaku", "mueseummini.jpg"],
                [-7.58291, 110.44768, "Bunker Kali Adem", "bunker.jpg"],
                [-7.61548, 110.43412, "Lava Tour Merapi", "lavatour.jpg"],
                [-7.60492, 110.43511, "Plunyon Kalikangkung", "plunyon.jpg"],
                [-7.60757, 110.42154, "Suraloka Zoo ", "suraloka.jpeg"],
                [-7.58799, 110.42154, "Goa Jepang", "goa.jpeg"],
                [-7.59358, 110.43053, "Tlogo Putri", "putri.jpeg"],
                [-7.59786, 110.42339, "Musium Ullen Sentalu", "sentalu.jpg"],
                [-7.59358, 110.43397, "Tlogo Muncar", "muncar.jpg"],
                [-7.78157, 110.50458, "Tebing Breksi", "breksi.jpg"],
                [-7.80815, 110.45951, "Lava Bantal", "lavabantal.jpeg"],
                [-7.76725, 110.47233, "Candi Kalasan", "kalasan.jpg"],
                [-7.6234,  110.42154, "Dino Park Jogja", "dino.jpeg"],
                [-7.72887, 110.35845, "Jogja Exotarium Mini Zoo", "zoo.jpeg"],
                [-7.81037, 110.46868, "Candi Abang", "abang.jpeg"],
                [-7.80631, 110.51843, "Obelix Hills", "obelix.jpeg"],
                [-7.62596, 110.42454, "Heha Forest", "heha.jpeg"],
                [-7.59301, 110.42499, "Taman Gardu Pandang", "gardu.jpeg"],
                [-7.58754, 110.43195, "Bukit Pelawangan", "pelawangan.jpeg"],
                [-7.60142, 110.43284, "Tankaman Natural Park", "tankaman.jpeg"],
                [-7.75202, 110.49146, "Candi Prambanan", "prambanan.jpg"],
                [-7.74943, 110.36964, "Monumen Yogya Kembali", "monjali.jpg"],
                [-7.74959, 110.36949, "Taman Pelangi", "pelangi.jpeg"],
                
            ]

            var markers = L.markerClusterGroup();

            for (var i = 0; i < addressPoints.length; i++) {
                console.log(addressPoints[i][0]);
                console.log(addressPoints[i]);
                // var a = addressPoints[i];
                var title1 = addressPoints[i][2];
                var marker = L.marker([addressPoints[i][0], addressPoints[i][1]]
                );

                // L.marker([addressPoints[i][0], addressPoints[i][1]]).addTo(map).bindPopup(
                //     title1                

                //     );

                marker.bindPopup(
                    "<img src=images/" + `${addressPoints[i][3]}` + " width='100' /> <br> " + addressPoints[i][2]

                );
                
                markers.addLayer(marker);

               
            }
          
            map.addLayer(markers);
            map.setView([-7.6209, 110.42162], 28);
        </script>
    </body>

</html>